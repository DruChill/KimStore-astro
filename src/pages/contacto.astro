---
import Layout from '../layouts/Layout.astro';
import { Mail, MessageCircle, Clock, Send, MessageCircleQuestion } from 'lucide-astro';
---

<Layout title="Contacto | KimYuna - Creative Tools" currentPath="/contacto">
	<div class="bg-neutral-900 text-white min-h-screen">
		<div class="max-w-6xl mx-auto py-10 px-4">
			<div class="mb-8">
				<div class="text-center mb-8">
					<h1 class="text-5xl font-bold mb-4">Contacto</h1>
					<p class="text-xl text-gray-400">
						¿Tienes alguna pregunta? Estamos aquí para ayudarte
					</p>
				</div>
			</div>

			<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
				<!-- Formulario de Contacto -->
				<div class="lg:col-span-2">
					<form action="https://formspree.io/f/mlekepaw" method="POST">
						<!-- Card -->
						<div class="bg-neutral-800 border border-neutral-700 rounded-lg overflow-hidden">
							<!-- Card Header -->
							<div class="p-6 border-b border-neutral-700">
								<h3 class="text-xl font-semibold flex items-center gap-2">
									<MessageCircle class="h-5 w-5" />
									Envíanos un mensaje
								</h3>
								<p class="text-sm text-gray-400 mt-2">
									Completa el formulario y te responderemos lo antes posible
								</p>
							</div>

							<!-- Card Content -->
							<div class="p-6 space-y-6">
								<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
									<div class="space-y-2">
										<label for="email" class="block text-sm font-medium">
											Correo electrónico <span class="text-red-500">*</span>
										</label>
										<input
											id="email"
											type="email"
											name="email"
											placeholder="tu@correo.com"
											required
											class="w-full px-3 py-2 bg-neutral-900 border border-neutral-700 rounded-md text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
										/>
									</div>

									<div class="space-y-2">
										<label for="subject" class="block text-sm font-medium">
											Asunto <span class="text-red-500">*</span>
										</label>
										<input
											id="subject"
											name="subject"
											placeholder="¿En qué podemos ayudarte?"
											required
											class="w-full px-3 py-2 bg-neutral-900 border border-neutral-700 rounded-md text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
										/>
									</div>
								</div>

								<div class="space-y-2">
									<label for="category" class="block text-sm font-medium">
										Categoría
									</label>
									<select
										id="category"
										name="category"
										class="w-full px-3 py-2 bg-neutral-900 border border-neutral-700 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
									>
										<option value="">Selecciona una categoría</option>
										<option value="soporte">Soporte técnico</option>
										<option value="productos">Consulta sobre productos</option>
										<option value="link-caido">Reportar link caído</option>
										<option value="otro">Otro</option>
									</select>
								</div>

								<div class="space-y-2">
									<label for="message" class="block text-sm font-medium">
										Mensaje <span class="text-red-500">*</span>
									</label>
									<textarea
										id="message"
										name="message"
										placeholder="Describe tu consulta o problema en detalle..."
										required
										rows="5"
										class="w-full px-3 py-2 bg-neutral-900 border border-neutral-700 rounded-md text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[120px]"
									></textarea>
								</div>

								<div class="space-y-4">
									<div class="text-sm text-gray-400">
										<p>* Campos obligatorios</p>
									</div>

									<button
										type="submit"
										class="w-full md:w-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors flex items-center justify-center gap-2"
									>
										<Send class="h-4 w-4" />
										Enviar mensaje
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>

				<!-- Información de Contacto -->
				<div class="space-y-6">
					<!-- Información General -->
					<div class="bg-neutral-800 border border-neutral-700 rounded-lg overflow-hidden">
						<div class="p-6 border-b border-neutral-700">
							<h3 class="text-xl font-semibold flex items-center gap-2">
								<Mail class="h-5 w-5" />
								Información de contacto
							</h3>
						</div>

						<div class="p-6 space-y-4">
							<div class="flex items-start gap-3">
								<Clock class="h-5 w-5 text-gray-400 mt-0.5" />
								<div>
									<p class="font-medium">Horario de respuesta</p>
									<p class="text-sm text-gray-400">
										Lunes a Sábado<br />
										9:00 AM - 10:00 PM (GMT-5)
									</p>
								</div>
							</div>

							<div class="flex items-start gap-3">
								<MessageCircle class="h-5 w-5 text-gray-400 mt-0.5" />
								<div>
									<p class="font-medium">Tiempo de respuesta</p>
									<p class="text-sm text-gray-400">
										Usualmente dentro de 2 horas
									</p>
								</div>
							</div>
						</div>
					</div>

					<!-- FAQ Rápido -->
					<div class="bg-neutral-800 border border-neutral-700 rounded-lg overflow-hidden">
						<div class="p-6 border-b border-neutral-700">
							<h3 class="text-xl font-semibold flex items-center gap-2">
								<MessageCircleQuestion class="h-5 w-5" />
								Preguntas frecuentes
							</h3>
						</div>

						<div class="p-6 space-y-4">
							<div>
								<p class="font-medium text-sm">¿Cómo descargo mis productos?</p>
								<p class="text-xs text-gray-400 mt-1">
									Después del pago, recibirás un correo con enlaces de descarga, también puedes acceder a ellos en tu dashboard.
								</p>
							</div>

							<div>
								<p class="font-medium text-sm">¿Puedo solicitar un reembolso?</p>
								<p class="text-xs text-gray-400 mt-1">
									No, revisa nuestra{" "}
									<a href="/policies/reembolsos" class="text-blue-500 hover:underline">
										política de reembolsos
									</a>
								</p>
							</div>

							<div>
								<p class="font-medium text-sm">¿Ofrecen soporte técnico?</p>
								<p class="text-xs text-gray-400 mt-1">
									Sí, puedes contactarnos a través de este formulario para cualquier consulta técnica.
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</Layout>

<script>
	// Llenar formulario con parámetros de URL del lado del cliente
	function fillFormFromURL() {
		const urlParams = new URLSearchParams(window.location.search);
		
		const subject = urlParams.get('subject');
		const category = urlParams.get('category');
		const message = urlParams.get('message');

		// Llenar los campos si hay valores en la URL
		// URLSearchParams.get() ya decodifica automáticamente, no necesitamos decodeURIComponent
		if (subject) {
			const subjectInput = document.getElementById('subject') as HTMLInputElement;
			if (subjectInput) subjectInput.value = subject;
		}

		if (category) {
			const categorySelect = document.getElementById('category') as HTMLSelectElement;
			if (categorySelect) categorySelect.value = category;
		}

		if (message) {
			const messageTextarea = document.getElementById('message') as HTMLTextAreaElement;
			if (messageTextarea) messageTextarea.value = message;
		}
	}

	// Ejecutar al cargar la página
	fillFormFromURL();

	// También ejecutar después de navegaciones con View Transitions
	document.addEventListener('astro:page-load', fillFormFromURL);
</script>